This tutorial is for monitring an order processing system with isolation forest based anomaly detection. 
It uses log records generated by the order processing business workflow system. 

Environment
===========
Path etc shown here corresposnds to my environment. Please Change them  as needed  for your 
environment by editing ecomm.sh

Build
=====
Follow instructions in spark_dependency.txt

Python dependency
=================
Before you run python scripts for  data generation please do the following
1. checkout project avenir
2. copy the avenir/python/lib directory to ../lib with respect to your location of ecomm.py file

You could run ecomm.py from the python/app directory of beymani  where it resides or copy it 
some where else

Generate order processing data
==============================
./ecomm.py ordProcessRecs <num_orders> > orpr.txt
where
num_orders = num of orders e.g 200

Insert outliers
===============
./ecomm.py olOrdPr orpr.txt <ol_percent> > rorpr.txt
where
ol_percent = outlier percentage e.g 10

Run anomaly detector Spark job
==============================
Set score.threshold in ecomm.conf to some reasoable value e.g 0.5

Run Spark job
./ecomm.sh orpOlPred

Get upper tail statistics of outlier scores
===========================================
./olss.py sttest ./output/ecom/orp 0 hist

Run anomaly detector Spark job with new threshold value
=======================================================
Choose your threshold based on some confidence limit e.g 0.9 from the output of the lasr step Use that 
value to set score.threshold  in ecomm.conf

Run Spark job again
./ecomm.sh orpOlPred



